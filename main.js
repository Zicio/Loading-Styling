(()=>{"use strict";class t{static showPopup(){const e=document.querySelector(".news"),s=t.setEl("div","popup");e.append(s);const o=t.setEl("span","popup__text");o.textContent="Не удалось загрузить данные. Проверьте подключение и обновите страницу",s.append(o)}static setEl(t,...e){const s=document.createElement(t);return s.classList.add(...e),s}static showNews(e){const s=document.getElementsByClassName("tape__ticket");for(let o=0;o<s.length;o++){const n=s[o].querySelector(".ticket__date"),a=s[o].querySelector(".ticket__text"),r=t.getDate(e[o].date);n.textContent=`${r.day}.${r.month}.${r.year} ${r.hour}:${r.minute}`,a.textContent=e[o].text,n.classList.remove("download"),a.classList.remove("download")}}static getDate(t){const e=new Date(t),s=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");let n=String(e.getHours()).padStart(2,"0");return 24===n&&(n=0),{month:s,day:o,hour:n,minute:String(e.getMinutes()).padStart(2,"0"),year:+e.getFullYear().toString().slice(2)}}}class e{constructor(t){this.element=t,this.url=new URL("https://zicio-sw.herokuapp.com/"),e.start(),this.getRequest()}static start(){navigator.serviceWorker&&window.addEventListener("load",(async()=>{try{const t=await navigator.serviceWorker.register("/Loading-Styling/service-worker.js");console.log("sw registered",t)}catch(t){console.log("sw register fail",t)}}))}async getRequest(){try{const e=await fetch(`${this.url}news`);if(e.ok){const s=await e.json();return void t.showNews(s)}}catch(e){console.log(e),t.showPopup()}}}new e(document)})();